install.packages("xlsx")
lista_especies <- read_excel("Listado de especies Endémicas y Micro endémicas 14032017.xlsx", sheet="26052016")
install.packages("xlsx")
install.packages("xlsx")
system('defaults write org.R-project.R force.LANG en_US.UTF-8')
install.packages("xlsx")
lista_especies <- read_excel("Listado de especies Endémicas y Micro endémicas 14032017.xlsx", sheet="26052016")
lista_especies <- read_excel("Listado de especies Endémicas y Micro endémicas 14032017.xlsx", sheet="26052016")
lista_especies <- read_xlsx("Listado de especies Endémicas y Micro endémicas 14032017.xlsx", sheet="26052016")
install.packages("readxl")
lista_especies <- read_xlsx("Listado de especies Endémicas y Micro endémicas 14032017.xlsx", sheet="26052016")
lista_especies <- read_xlsx("Listado de especies Endémicas y Micro endémicas 14032017.xlsx", sheet="26052016")
lista_especies <- read_xlsx("Listado de especies Endémicas y Micro endémicas 14032017.xlsx", sheet="26052016")
install.packages("readxl")
install.packages("devtools")
readxl_example()
install.packages(devtools)
install.packages("devtools")
library('RPostgreSQL')
install.packages('RPostgreSQL')
('RPostgreSQL')
library('RPostgreSQL')
install.packages("dplyr")
library(dplyr)
library('RPostgreSQL')
pg = dbDriver("PostgreSQL")
con = dbConnect(pg, user="emiranda", password="",
host="localhost", port=5432, dbname="especies")
head(especies_anps_taxonomia)
head(especies_anps_taxonomia)
dbDisconnect(con)
library(dplyr)
library('RPostgreSQL')
pg = dbDriver("PostgreSQL")
con = dbConnect(pg, user="emiranda", password="",
host="localhost", port=5432, dbname="especies")
head(especies_anps_taxonomia)
d = tbl(localdb, "especies_anps_taxonomia")
# disconnect from the database
dbDisconnect(con)
library(dplyr)
library('RPostgreSQL')
pg = dbDriver("PostgreSQL")
#con = dbConnect(pg, user="emiranda", password="",
#                host="localhost", port=5432, dbname="especies")
localdb <- src_postgres(dbname = 'especies',
host = 'localhost',
port = 5432,
user = 'emiranda',
password = '')
d = tbl(localdb, "especies_anps_taxonomia")
pg = dbDriver("PostgreSQL")
con = dbConnect(pg, user="emiranda", password="",
host="localhost", port=5432, dbname="especies")
dbExistsTable(con, "especies_anps_taxonomia")
head(especies_anps_taxonomia)
head(con, especies_anps_taxonomia)
df_postgres <- dbGetQuery(con, "SELECT * from especies_anps_taxonomia")
head(df_postgres)
df_postgres <- dbGetQuery(con, "SELECT * from especies_anps_taxonomia")
parallel::detectCores()
install.packages(c("rgeos", "sf"))
install.packages(c("rgeos", "sf"))
install.packages(c("rgeos", "sf"))
install.packages(c("rgeos", "sf"))
install.packages(c("rgeos", "sf"))
install.packages(c("rgeos", "sf"))
install.packages(c("rgeos", "sf"))
install.packages(c("rgeos", "sf"))
install.packages(c("rgeos", "sf"))
install.packages(c("rgeos", "sf"))
install.packages(c("rgeos", "sf"))
install.packages("sf")
install.packages("sf")
install.packages("sf")
install.packages("sf")
install.packages("sp","rgdal")
install.packages("raster")
install.packages("raster", "2.9-5")
install.packages("raster")
install.packages("rasterVis", "maptools", "rgeos")
install.packages("ggplot2")
library(rgdal)     # R wrapper around GDAL/OGR
library(ggplot2)   # for general plotting
library(ggmaps)    # for fortifying shapefiles
library(rgdal)
library(ggplot2)
library(ggmaps)
install.packages("ggmaps")
install.packages("ggmaps")
library(rgdal)
install.packages("rasterVis", "maptools", "rgeos", "rgdal". "ggplot2", "ggmaps")
install.packages("rasterVis", "maptools", "rgeos", "rgdal", "ggplot2", "ggmaps")
install.packages("rasterVis", "rgeos", "rgdal", "ggplot2", "ggmaps")
install.packages("rasterVis", "rgdal", "ggplot2", "ggmaps")
install.packages(c("ggplot2", "ggmaps"))
require(rgdal)
require(sf)
library(dismo)
library(ggplot2)
# Metemos los shapes en unas variables
cdmx <- read_sf('/Users/emiranda/Downloads/GEO_Ecologia/practica_R_escuelas/red_df.shp')
escuelas_df <- read_sf('/Users/emiranda/Downloads/GEO_Ecologia/practica_R_escuelas/escuelas_df.shp')
plot(cdmx["class_id"])
plot(cdmx["class_id" == "101"])
plot(cdmx$class_id[c("101", "102")])
cdmx["class_id"]
plot(cdmx["class_id" %in% c("101", "102")])
"class_id" %in% c("101", "102")
cdmx$class_id
plot(st_boundary(cdmx["class_id"]))
plot(cdmx["class_id"])
cdmx$class_id
library(tidyverse)
library(rgdal)
shapefile <- readOGR("/Users/emiranda/Downloads/GEO_Ecologia/practica_R_escuelas/", "red_df")
shapefile_df <- fortify(shapefile, region = "class_id")
shapefile_df$row_id <- 1:nrow(shapefile_df)
View(shapefile_df)
# Replace `id` with new region name, where applicable
shapefile_df <- shapefile_df %>%
mutate(id = case_when(id %in% c("New Brunswick", "Nova Scotia", "Prince Edward Island") ~ "Atlantic Canada",
id %in% c("Saskatchewan", "Manitoba") ~ "Prairies",
TRUE ~ id))
# Replace `id` with new region name, where applicable
shapefile_df <- shapefile_df %>%
TRUE ~ id))
shapefile_df <- shapefile_df %>%
mutate(id = case_when(id %in% c("101","102","103","106","107","108",
TRUE ~ id))
# Merge map data with data to plot
map.data <- full_join(shapefile_df, data_to_plot, by = c("id" = "province"))
# Plot the map
ggplot(map.data) +
geom_polygon(aes(x = long, y = lat, group = id, fill = data),
size = 0, alpha = 0.9) +
geom_path(aes(x = long, y = lat, group = group),
color = "grey", size = 0.5, alpha = 0.5)
# Plot the map
ggplot(map.data) +
geom_polygon(aes(x = long, y = lat, group = id, fill = data),
size = 0, alpha = 0.9) +
geom_path(aes(x = long, y = lat, group = group),
color = "grey", size = 0.5, alpha = 0.5)
# Merge map data with data to plot
map.data <- full_join(shapefile_df, data_to_plot, by = c("id" = "province"))
# Merge map data with data to plot
map.data <- full_join(shapefile_df, data_to_plot, by = c("id" = "101"))
require("rgdal")
require("maptools")
require("ggplot2")
require("plyr")
require("rgdal")
require("maptools")
require("ggplot2")
require("plyr")
# read municipality polygons
setwd("/Users/emiranda/Downloads/GEO_Ecologia/practica_R_escuelas/")
esp     <- readOGR(dsn=".", layer="red_df")
muni    <- subset(esp, esp$class_id == "101" | esp$class_id == "102" | esp$class_id == "103")
# fortify and merge: muni.df is used in ggplot
muni@data$id <- rownames(muni@data)
View(muni)
muni.df <- fortify(muni)
muni.df <- join(muni.df, muni@data, by="id")
muni.df <- merge(muni.df, temp.data, by.x="CODIGOINE", by.y="CODINE", all.x=T, a..ly=F)
# create the map layers
ggp <- ggplot(data=muni.df, aes(x=long, y=lat, group=group))
ggp <- ggp + geom_polygon(aes(fill=LEVEL))         # draw polygons
ggp <- ggp + geom_path(color="grey", linestyle=2)  # draw boundaries
ggp <- ggp + coord_equal()
ggp <- ggp + scale_fill_gradient(low = "#ffffcc", high = "#ff4444",
space = "Lab", na.value = "grey50",
guide = "colourbar")
ggp <- ggp + labs(title="Temperature Levels: Comunitat Valenciana")
# render the map
print(ggp)
# read temperature data
setwd("/Users/emiranda/Downloads/GEO_Ecologia/practica_R_escuelas/")
temp.data        <- readOGR(dsn=".", layer="escuelas_df")
install.packages("maptools")
require("maptools")
require("ggplot2")
require("plyr")
# read temperature data
setwd("/Users/emiranda/Downloads/GEO_Ecologia/practica_R_escuelas/")
temp.data        <- readOGR(dsn=".", layer="escuelas_df")
library(tidyverse)
library(sf)
library(raster)
library(dplyr)
library(spData)
cdmx_shape <- read_sf('/Users/emiranda/Downloads/GEO_Ecologia/practica_R_escuelas/red_df.shp')
schools_cdmx <- read_sf('/Users/emiranda/Downloads/GEO_Ecologia/practica_R_escuelas/escuelas_df.shp')
cdmx_shape %>%
filter(!is.na(class_id)) %>%
group_by(class_id) %>%
summarise() %>%
ggplot() +
geom_sf(aes(fill = factor(class_id)))
cdmx_shape %>%
filter(!is.na(class_id)) %>%
group_by(class_id) %>%
summarise() %>%
ggplot() +
geom_sf(aes(fill = factor(class_id)))
plot(st_geometry(cdmx_shape))
cdmx$class_id %in% c("101", "102",
"103", "106", "107", "108")
# Metemos los shapes en unas variables
cdmx <- read_sf('/Users/emiranda/Downloads/GEO_Ecologia/practica_R_escuelas/red_df.shp')
cdmx$class_id %in% c("101", "102",
"103", "106", "107", "108")
cdmx$class_id
cdmx$class_id
cdmx$class_id %in% c("101", "102",
"103", "106", "107", "108")
plot(cdmx["class_id"])
escuelas_df <- read_sf('/Users/emiranda/Downloads/GEO_Ecologia/practica_R_escuelas/escuelas_df.shp')
View(cdmx)
View(escuelas_df)
cdmx_filtered <- filter(cdmx, cdmx$class_id %in% c("101", "102",
"103", "106", "107", "108"))
View(cdmx_filtered)
cdmx %>%
st_join(escuelas_df)
cdmx %>%
st_join(escuelas_df) %>%
plot()
plot(cdmx)
plot(cdmx, max.plot = 1)
glimpse(cdmx)
class(cdmx)
plot(st_geometry(cdmx))
plot(st_geometry(cdmx))
dev.off()
plot(st_geometry(cdmx))
st_distance(escuelas_df, cdmx_filtered)
install.packages("lwgeom")
st_distance(escuelas_df, cdmx_filtered)
escuelas_df %>%
top_n(20)
escuelas_sub<-escuelas_df %>%
top_n(20)
st_distance(escuelas_sub, cdmx_filtered)
aa <- ast_distance(escuelas_sub, cdmx_filtered)
aa <- st_distance(escuelas_sub, cdmx_filtered)
head(aa)
length(aa)
